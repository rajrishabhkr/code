<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="description" content="This is a Website">
		<title>Rishabh's Website</title>
		<link rel="stylesheet" type="text/css" href="abc.css">
	</head>
	<body>
		<div id='optionDD'></div>
		<div id='showTableAdd'></div>
		<script>
			let jsons=[
			{"name":"Jack","age":28,"city":"London","tech":"Node JS"}, 
			{"name":"Mary","age":32,"city":"Mumbai","tech":"React JS"},
			{"name":"Bob","age":35,"city":"New York","tech":"Angular JS"},
			{"name":"Steve","age":26,"city":"NewDelhi","tech":"Javascript JS"},
			{"name":"Edwards","age":27,"city":"Los Angeles","tech":"Node JS"},
			{"name":"Catherine","age":31,"city":"Montreal","tech":"React JS"},
			{"name":"Williams","age":34,"city":"New York","tech":"Android"},
			{"name":"John","age":25,"city":"Moscow","tech":"Java"},
			{"name":"Anna","age":33,"city":"Moscow","tech":"Node JS"},
			{"name":"Julia","age":29,"city":"New Jersey","tech":"Android"}
			];
			let allowDD=["Name starts with","City starts with","Tech starts with","Name,city or Tech starts with","Present in Name,City or Tech"];
			showDDOption();
			function showDDOption() {
				let str=makefilterDD('dd1',allowDD,'Select the Appropriate Filter','');
				str+=' <input type="text" id="fstr" placeholder="Enter the filter string" onkeyup="changeDDfns()">';
				let div=document.getElementById('optionDD');
				div.innerHTML=str;
			}
			function makefilterDD(id,arr,first,selVal) {
				const arr1=arr.map(function(opt) {
					if(opt==selVal)
						return '<option selected>'+opt+'</option>';
					else
						return '<option>'+opt+'</option>';
				});
				let header='<option disabled>'+first+'</option>';
				if(selVal=='')
					header='<option disabled selected>'+first+'</option>';
				let s1='<select id=\''+id+'\' onchange="changeDDfns()">'+header+arr1.join('')+'</select>';
				return s1;
			}
			showTable();
			function showTable(){
				let stMap=jsons.map(function(ele){
					let str='<tr>';
					str+='<td class="col1">' + ele.name+'</td>';
					str+='<td class="col1">' + ele.age+'</td>';
					str+='<td class="col1">' + ele.city+'</td>';
					str+='<td class="col1">' + ele.tech+'</td>';
					str+='</tr>';
					return str;
				});
				let header='<tr>';
				header +='<th class="th1">Name</th>';
				header +='<th class="th1">Age</th>';
				header +='<th class="th1">City</th>';
				header +='<th class="th1">Tech</th>';
				header +='</tr>';
				let html='<table class="table1">'+header+stMap.join('')+'</table>';
				let element=document.getElementById('showTableAdd');
				element.innerHTML=html;
			}
			function changeDDfns() {
				let ex=document.getElementById("dd1").value;
				if(ex==allowDD[0])
					return optionDDfns1();
				else if(ex==allowDD[1])
					return optionDDfns2();
				else if(ex==allowDD[2])
					return optionDDfns3();
				else if(ex==allowDD[3])
					return optionDDfns4();
				else
					return optionDDfns5();
			}
			function optionDDfns1() {
				let txt=document.getElementById("fstr").value;
				let index=txt.length;
				let jsonTxt=jsons.filter(function(ele) {
					return ele.name.substring(0,index)==txt;
				});
				let stMap=jsonTxt.map(function(ele){
					let str='<tr>';
					str+='<td class="col1">' + ele.name+'</td>';
					str+='<td class="col1">' + ele.age+'</td>';
					str+='<td class="col1">' + ele.city+'</td>';
					str+='<td class="col1">' + ele.tech+'</td>';
					str+='</tr>';
					return str;
				});
				let header='<tr>';
				header +='<th class="th1">Name</th>';
				header +='<th class="th1">Age</th>';
				header +='<th class="th1">City</th>';
				header +='<th class="th1">Tech</th>';
				header +='</tr>';
				let html='<table class="table1">'+header+stMap.join('')+'</table>';
				let element=document.getElementById('showTableAdd');
				element.innerHTML=html;
			}
			function optionDDfns2() {
				let txt=document.getElementById("fstr").value;
				let index=txt.length;
				let jsonTxt=jsons.filter(function(ele) {
					return ele.city.substring(0,index)==txt;
				});
				let stMap=jsonTxt.map(function(ele){
					let str='<tr>';
					str+='<td class="col1">' + ele.name+'</td>';
					str+='<td class="col1">' + ele.age+'</td>';
					str+='<td class="col1">' + ele.city+'</td>';
					str+='<td class="col1">' + ele.tech+'</td>';
					str+='</tr>';
					return str;
				});
				let header='<tr>';
				header +='<th class="th1">Name</th>';
				header +='<th class="th1">Age</th>';
				header +='<th class="th1">City</th>';
				header +='<th class="th1">Tech</th>';
				header +='</tr>';
				let html='<table class="table1">'+header+stMap.join('')+'</table>';
				let element=document.getElementById('showTableAdd');
				element.innerHTML=html;
			}
			function optionDDfns3() {
				let txt=document.getElementById("fstr").value;
				let index=txt.length;
				let jsonTxt=jsons.filter(function(ele) {
					return ele.tech.substring(0,index)==txt;
				});
				let stMap=jsonTxt.map(function(ele){
					let str='<tr>';
					str+='<td class="col1">' + ele.name+'</td>';
					str+='<td class="col1">' + ele.age+'</td>';
					str+='<td class="col1">' + ele.city+'</td>';
					str+='<td class="col1">' + ele.tech+'</td>';
					str+='</tr>';
					return str;
				});
				let header='<tr>';
				header +='<th class="th1">Name</th>';
				header +='<th class="th1">Age</th>';
				header +='<th class="th1">City</th>';
				header +='<th class="th1">Tech</th>';
				header +='</tr>';
				let html='<table class="table1">'+header+stMap.join('')+'</table>';
				let element=document.getElementById('showTableAdd');
				element.innerHTML=html;
			}
			function optionDDfns4() {
				let txt=document.getElementById("fstr").value;
				let index=txt.length;
				let jsonTxt=jsons.filter(function(ele) {
					return ele.name.substring(0,index)==txt || ele.city.substring(0,index)==txt || ele.tech.substring(0,index)==txt;
				});
				let stMap=jsonTxt.map(function(ele){
					let str='<tr>';
					str+='<td class="col1">' + ele.name+'</td>';
					str+='<td class="col1">' + ele.age+'</td>';
					str+='<td class="col1">' + ele.city+'</td>';
					str+='<td class="col1">' + ele.tech+'</td>';
					str+='</tr>';
					return str;
				});
				let header='<tr>';
				header +='<th class="th1">Name</th>';
				header +='<th class="th1">Age</th>';
				header +='<th class="th1">City</th>';
				header +='<th class="th1">Tech</th>';
				header +='</tr>';
				let html='<table class="table1">'+header+stMap.join('')+'</table>';
				let element=document.getElementById('showTableAdd');
				element.innerHTML=html;
			}
			function optionDDfns5() {
				let txt=document.getElementById("fstr").value;
				let index=txt.length;
				let jsonTxt=jsons.filter(function(ele) {
					return ele.name.includes(txt)==true || ele.city.includes(txt)==true || ele.tech.includes(txt)==true;
				});
				let stMap=jsonTxt.map(function(ele){
					let str='<tr>';
					str+='<td class="col1">' + ele.name+'</td>';
					str+='<td class="col1">' + ele.age+'</td>';
					str+='<td class="col1">' + ele.city+'</td>';
					str+='<td class="col1">' + ele.tech+'</td>';
					str+='</tr>';
					return str;
				});
				let header='<tr>';
				header +='<th class="th1">Name</th>';
				header +='<th class="th1">Age</th>';
				header +='<th class="th1">City</th>';
				header +='<th class="th1">Tech</th>';
				header +='</tr>';
				let html='<table class="table1">'+header+stMap.join('')+'</table>';
				let element=document.getElementById('showTableAdd');
				element.innerHTML=html;
			}
		</script>
	</body>
</html> 